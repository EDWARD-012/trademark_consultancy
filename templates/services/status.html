{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="min-h-screen py-24 px-4 sm:px-6 lg:px-8 relative overflow-hidden flex flex-col items-center">
    
    <div class="fixed top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full bg-lovable-purple/10 blur-[120px] pointer-events-none"></div>
    <div class="fixed bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full bg-lovable-blue/10 blur-[120px] pointer-events-none"></div>

    <div class="relative z-10 w-full max-w-4xl flex flex-col items-center">

        <div class="text-center max-w-2xl mx-auto mb-12">
            <h1 class="text-4xl font-extrabold text-white tracking-tight sm:text-5xl mb-4">
                Track Your <span class="text-transparent bg-clip-text bg-gradient-to-r from-lovable-purple to-lovable-blue">Application</span>
            </h1>
            <p class="text-lg text-slate-400">
                Enter your Trademark Application Number to check real-time status updates from the registry.
            </p>
        </div>

        <div class="w-full max-w-xl glass p-8 rounded-[32px] border border-white/10 shadow-2xl mb-12">
            <form method="POST" class="space-y-6 status-form">
                {% csrf_token %}
                <div>
                    <label for="application_number" class="text-[10px] font-bold text-lovable-purple uppercase tracking-widest ml-2 mb-2 block">
                        Application Number
                    </label>
                    <div class="relative">
                        <input type="text" name="application_number" id="application_number" 
                               class="w-full"
                               placeholder="e.g. TM12345" required>
                        <i class="fa-solid fa-hashtag absolute right-4 top-4 text-slate-500"></i>
                    </div>
                </div>
                <button type="submit" class="w-full bg-gradient-to-r from-lovable-purple to-lovable-blue text-white font-bold py-4 rounded-2xl shadow-lg shadow-lovable-purple/20 hover:shadow-lovable-purple/40 hover:scale-[1.01] active:scale-95 transition-all duration-300 flex justify-center items-center gap-2 text-lg">
                    <i class="fa-solid fa-magnifying-glass text-sm"></i> Check Status
                </button>
            </form>
        </div>
        
        {% if error %}
        <div class="w-full max-w-xl bg-red-500/10 border border-red-500/20 p-4 rounded-2xl mb-10 flex items-center gap-4 animate-fade-in-up">
            <div class="flex-shrink-0 w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center text-red-400">
                <i class="fa-solid fa-circle-exclamation"></i>
            </div>
            <div>
                <h4 class="text-white font-bold text-sm">Not Found</h4>
                <p class="text-red-300 text-xs">{{ error }}</p>
            </div>
        </div>
        {% endif %}

        {% if application %}
        <div class="w-full glass rounded-[32px] border border-white/10 overflow-hidden shadow-2xl animate-fade-in-up">
            
            <div class="px-8 py-6 border-b border-white/5 bg-white/5 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-4">
                    <div class="h-12 w-12 rounded-xl bg-gradient-to-br from-lovable-purple to-lovable-blue flex items-center justify-center text-white text-xl shadow-lg">
                        <i class="fa-solid fa-file-contract"></i>
                    </div>
                    <div>
                        <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1">Application No</span>
                        <h3 class="text-2xl font-bold text-white tracking-tight">{{ application.application_number }}</h3>
                    </div>
                </div>
                
                <div class="px-5 py-2 rounded-full font-bold text-sm border shadow-lg backdrop-blur-md
                    {% if 'registered' in application.status %} bg-green-500/20 text-green-400 border-green-500/30
                    {% elif 'objected' in application.status or 'refused' in application.status %} bg-red-500/20 text-red-400 border-red-500/30
                    {% elif 'received' in application.status %} bg-blue-500/20 text-blue-400 border-blue-500/30
                    {% else %} bg-yellow-500/20 text-yellow-400 border-yellow-500/30 {% endif %}">
                    <i class="fa-solid fa-circle text-[8px] mr-2 opacity-70 animate-pulse"></i>
                    {{ application.get_status_display }}
                </div>
            </div>

            <div class="p-8">
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-8">
                    
                    <div class="group">
                        <dt class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">Trademark Name</dt>
                        <dd class="text-lg font-bold text-white">{{ application.trademark_name }}</dd>
                    </div>

                    <div class="group">
                        <dt class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">Applicant Name</dt>
                        <dd class="text-lg text-slate-300">{{ application.applicant_name }}</dd>
                    </div>

                    <div class="group">
                        <dt class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">Class</dt>
                        <dd class="text-lg text-slate-300">Class {{ application.trademark_class }}</dd>
                    </div>

                    <div class="group">
                        <dt class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">Filing Date</dt>
                        <dd class="text-lg text-slate-300">{{ application.filing_date }}</dd>
                    </div>

                    <div class="md:col-span-2 mt-4">
                        <dt class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2">Current Action Required</dt>
                        <dd class="rounded-2xl border p-4 
                            {% if 'objected' in application.status %} bg-red-500/10 border-red-500/20
                            {% elif 'registered' in application.status %} bg-green-500/10 border-green-500/20
                            {% else %} bg-white/5 border-white/10 {% endif %}">
                            
                            {% if 'objected' in application.status %}
                                <div class="flex items-start gap-3">
                                    <i class="fa-solid fa-triangle-exclamation text-red-400 mt-1"></i>
                                    <div>
                                        <strong class="text-red-400 block mb-1">Attention Needed</strong>
                                        <p class="text-slate-400 text-sm">An objection has been raised. A reply must be filed within 30 days to avoid abandonment.</p>
                                        <a href="{% url 'contact' %}" class="inline-block mt-3 text-xs font-bold text-white bg-red-500/20 px-3 py-1 rounded-lg border border-red-500/30 hover:bg-red-500 hover:border-red-500 transition-all">
                                            Contact Us Now &rarr;
                                        </a>
                                    </div>
                                </div>
                            {% elif 'registered' in application.status %}
                                <div class="flex items-start gap-3">
                                    <i class="fa-solid fa-certificate text-green-400 mt-1"></i>
                                    <div>
                                        <strong class="text-green-400 block mb-1">Success</strong>
                                        <p class="text-slate-400 text-sm">Your trademark is registered. Validity is 10 years.</p>
                                    </div>
                                </div>
                            {% else %}
                                <div class="flex items-start gap-3">
                                    <i class="fa-solid fa-clock text-slate-400 mt-1"></i>
                                    <div>
                                        <strong class="text-white block mb-1">Processing</strong>
                                        <p class="text-slate-400 text-sm">Application is under normal processing. No action required from your side currently.</p>
                                    </div>
                                </div>
                            {% endif %}
                        </dd>
                    </div>
                </dl>
            </div>
        </div>
        {% endif %}

    </div>
</div>

<style>
    .status-form input[type="text"] {
        background-color: rgba(255, 255, 255, 0.05) !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
        border-radius: 1rem !important;
        padding: 1rem 1.25rem !important;
        color: white !important;
        font-size: 1.125rem !important;
        outline: none !important;
        transition: all 0.3s ease;
        letter-spacing: 0.05em;
    }

    .status-form input:focus {
        border-color: #9b87f5 !important;
        box-shadow: 0 0 0 2px rgba(155, 135, 245, 0.2) !important;
        background-color: rgba(255, 255, 255, 0.1) !important;
    }
    
    /* Animation for result card */
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
    }
</style>
{% endblock %}